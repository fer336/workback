{
  "active": false,
  "connections": {
    "Segmentos": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1,2s": {
      "main": [
        [
          {
            "node": "no.op2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Replace Me1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "no.op2": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replace Me1": {
      "main": [
        [
          {
            "node": "Responde texto",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Responde texto": {
      "main": [
        [
          {
            "node": "1,2s",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Agente de IA RAG",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Agente de IA RAG": {
      "main": [
        [
          {
            "node": "replace",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculator": {
      "ai_tool": [
        [
          {
            "node": "Agente de IA RAG",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Agente de IA RAG",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "replace": {
      "main": [
        [
          {
            "node": "Segmentos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "buscar_producto": {
      "ai_tool": [
        [
          {
            "node": "Agente de IA RAG",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "OpenAI1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Compara Get Memory": {
      "main": [
        [
          {
            "node": "Compara memorias",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Memory 2": {
      "main": [
        [
          {
            "node": "Redis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait2": {
      "main": [
        [
          {
            "node": "Get Memory 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis": {
      "main": [
        [
          {
            "node": "Compara Get Memory",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Memory 1": {
      "main": [
        [
          {
            "node": "Escribiendo...",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Form Me1": {
      "main": [
        [
          {
            "node": "getCliente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limpiamos Imagen": {
      "main": [
        [
          {
            "node": "Variables individuales",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Variables individuales": {
      "main": [
        [
          {
            "node": "Text Memory",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Compara memorias": {
      "main": [
        [
          {
            "node": "Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text Memory": {
      "main": [
        [
          {
            "node": "Get Memory 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Escribiendo...": {
      "main": [
        [
          {
            "node": "Wait2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI1": {
      "main": [
        [
          {
            "node": "Text Memory",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete": {
      "main": [
        [
          {
            "node": "Agente de IA RAG",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "imagen1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "imagen1": {
      "main": [
        [
          {
            "node": "OpenAI2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI2": {
      "main": [
        [
          {
            "node": "Limpiamos Imagen",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook1": {
      "main": [
        [
          {
            "node": "Form Me1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "insertCliente": {
      "main": [
        [
          {
            "node": "getCliente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "getCliente": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Unificados": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "camposiniciales": {
      "main": [
        [
          {
            "node": "Prompts",
            "type": "main",
            "index": 0
          },
          {
            "node": "NoOp.4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "fromMe": {
      "main": [
        [
          {
            "node": "NOP1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "camposiniciales",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "fromMe",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "insertCliente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prompts": {
      "main": [
        [
          {
            "node": "Unificados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "NoOp.4": {
      "main": [
        [
          {
            "node": "Unificados",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Text Memory",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-06-28T03:55:32.221Z",
  "id": "chLQSE8prxz5QtaZ",
  "isArchived": true,
  "meta": null,
  "name": "VENDEDOR - REPUESTOS GAS",
  "nodes": [
    {
      "parameters": {
        "fieldToSplitOut": "text",
        "options": {
          "destinationFieldName": "msg"
        }
      },
      "id": "8178d16c-111e-4d33-8598-5106fe3c3f46",
      "name": "Segmentos",
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2280,
        800
      ]
    },
    {
      "parameters": {
        "amount": 1.2
      },
      "id": "2f6fcc81-ac72-4409-9947-93ad51910353",
      "name": "1,2s",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3280,
        740
      ],
      "webhookId": "8a810ad6-4ecf-4781-aed8-7f2b295770dc"
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "238fdc7c-d4e4-4d82-9734-06b9a076e455",
      "name": "Loop Over Items1",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2720,
        800
      ]
    },
    {
      "parameters": {},
      "id": "e4bcdf78-65e6-4747-9161-a15b8a510e2f",
      "name": "no.op2",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        3480,
        800
      ]
    },
    {
      "parameters": {},
      "id": "ca023089-292f-4b6a-9398-985d12db2bd1",
      "name": "Replace Me1",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        2900,
        800
      ]
    },
    {
      "parameters": {
        "content": "## Divide el mensaje de una manera natural para WhatsApp",
        "height": 413.5711063751039,
        "width": 771.8849298360533
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1620,
        620
      ],
      "typeVersion": 1,
      "id": "c214fb98-d27f-4f2c-b939-63f44e37b605",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Envía los mensajes",
        "height": 413.10685098598157,
        "width": 1021.2519181399954,
        "color": 4
      },
      "id": "6eceabe4-fdae-4484-9680-ae2613595dc3",
      "name": "Sticky Note17",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2420,
        620
      ]
    },
    {
      "parameters": {
        "content": "",
        "height": 724.0052364677435,
        "width": 1907.2803362509112,
        "color": 5
      },
      "id": "883190c7-9e92-48ca-a7b7-6c77a0374a4f",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1580,
        520
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('camposiniciales').item.json.whatsapp.evo.server_url }}/message/sendText/{{ $('camposiniciales').item.json.whatsapp.evo.nombreInstancia }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "={{ $('camposiniciales').item.json.whatsapp.evo.apikey }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "number",
              "value": "={{ $('camposiniciales').item.json.meta.telefonoCliente }}"
            },
            {
              "name": "text",
              "value": "={{ $json.msg }}"
            },
            {
              "name": "linkPreview",
              "value": "={{ $('camposiniciales').item.json.linkPreview }}"
            },
            {
              "name": "delay",
              "value": "={{ $('camposiniciales').item.json.Digitando }}"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "id": "cbda0132-a343-4efd-b6ae-242b8dfff1b8",
      "name": "Responde texto",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3080,
        740
      ],
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "72c70b73-3f2c-46ca-acd0-8897f87eadd7",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        700,
        740
      ],
      "credentials": {
        "openAiApi": {
          "id": "UfA35dBDzEebw8zR",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 700,
        "width": 980,
        "color": 7
      },
      "id": "7bc19967-97db-4cd3-a716-83f1007af2a6",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        560,
        540
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Compara memorias').item.json.mensage_completo }}",
        "options": {
          "systemMessage": "={{ $('Unificados').item.json.systemMessageAgente }}",
          "maxIterations": 6
        }
      },
      "id": "db2a83b0-aabc-4988-89c3-effb41e8f9cf",
      "name": "Agente de IA RAG",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        860,
        560
      ]
    },
    {
      "parameters": {},
      "id": "253e9d53-7ae5-40ef-bb0b-32c3f49b38e3",
      "name": "Calculator",
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "typeVersion": 1,
      "position": [
        1260,
        820
      ]
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}",
        "tableName": "n8n_chat_histories_sanitarios"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1380,
        820
      ],
      "id": "68491479-8860-44c3-b74f-557a84c00f74",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "E1mi81N6Tmr5cHS5",
          "name": "GENERICO"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5d04d69d-cb9c-41be-a44a-95fac3c059f3",
              "name": "text",
              "value": "={{ $json.output.replace(/\\*\\*(.*?)\\*\\*/g, '*$1*').replace(/###\\s*/g, '').replace(/[¡¿!]/g, '').split(/\\n\\n|---/) }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "9ecd09a4-7608-4935-b80b-cf139edb5ace",
      "name": "replace",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2080,
        800
      ]
    },
    {
      "parameters": {
        "content": "#### Credenciales y datos predeterminados",
        "height": 80,
        "width": 282,
        "color": 4
      },
      "id": "1e7f4b7d-2adb-4298-8aa1-42a2dd864918",
      "name": "Sticky Note15",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -260,
        340
      ]
    },
    {
      "parameters": {
        "name": "buscar_productos",
        "description": "llamaras a esta herramienta cuando se solicite buscar un producto tanto el precio como su disponibilidad",
        "workflowId": {
          "__rl": true,
          "value": "kJEYLOfS8It5Eb4r",
          "mode": "list",
          "cachedResultName": "VENDENDOR - Buscar productos"
        },
        "specifyInputSchema": true,
        "jsonSchemaExample": "{\n\t\"Descripcion\": \"Estoy buscando el precio de la termocupla\"\n}"
      },
      "id": "333c1b34-31f4-476b-bc11-180e286a267f",
      "name": "buscar_producto",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.2,
      "position": [
        880,
        1020
      ]
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "body.data.message.base64",
        "options": {
          "mimeType": "audio/mp3"
        }
      },
      "id": "1ddf6157-751c-4ca1-bef9-7ffb147bc445",
      "name": "Convert to File",
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        -560,
        1420
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "d5a342e9-585b-42ea-be44-644adae10199",
              "leftValue": "={{ $json.Redis1 }}",
              "rightValue": "={{ $json.Redis2 }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "76de8ce2-2a9c-4246-9f33-5f1b4b7e77c3",
      "name": "Compara Get Memory",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        280,
        1100
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "Redis2",
        "key": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}",
        "options": {}
      },
      "id": "739a43ab-2bbc-441c-b8ae-1a177c728bdd",
      "name": "Get Memory 2",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -40,
        1100
      ],
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    },
    {
      "parameters": {
        "amount": 9
      },
      "id": "3596ad5d-7ddb-4656-864e-1c00dadbe330",
      "name": "Wait2",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -180,
        1100
      ],
      "webhookId": "6f130bc2-7de0-4353-b6d0-653f7c7e6623",
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "86ff282a-3ede-4417-98c1-0d10858bc5dc",
              "name": "Redis1",
              "value": "={{ $('Get Memory 1').item.json.Redis1 }}",
              "type": "string"
            },
            {
              "id": "3cd6e8a1-98ef-4abb-9490-fb7946365cfb",
              "name": "Redis2",
              "value": "={{ $json.Redis2 }}",
              "type": "string"
            },
            {
              "id": "975fae7d-8ba6-4149-9d13-868f9089e362",
              "name": "session_id",
              "value": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}",
              "type": "string"
            },
            {
              "id": "44b9f086-b3ab-4bdb-b82d-923349941e26",
              "name": "Redis3",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "b73b9767-35b6-4b3a-8eaa-1310fc504bc5",
      "name": "Redis",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        120,
        1100
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "Redis1",
        "key": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}",
        "options": {
          "dotNotation": true
        }
      },
      "id": "64bd31ce-d85d-460e-b983-08eef342a8b4",
      "name": "Get Memory 1",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -460,
        1100
      ],
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b7d210f0-6a18-456d-9e89-aa28f548b2a0",
              "name": "body.data.message.base64",
              "value": "={{ $('Webhook1').item.json.body.data.message.base64 }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "31e95a47-b5fa-4624-8f42-8a7e235fe6af",
      "name": "Edit Fields3",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -760,
        1420
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "94746291-c0f3-44f3-b635-1fe696d7d74e",
              "leftValue": "={{ $json.body.data.key.fromMe }}",
              "rightValue": "false",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "1b015faf-6b41-40b9-b28f-f7f484aece4c",
              "leftValue": "={{ $json.body.data.key.remoteJid }}",
              "rightValue": "=5492254423359@s.whatsapp.net",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "1ade3230-5324-4a1c-88f2-30a01c52b9cc",
      "name": "Form Me1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3540,
        1160
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "21febd42-6a94-4e95-a4e0-a82e9eac9008",
              "name": "Limpio",
              "value": "={{ $json.content.replace(/\\\\n|\"\"\"|json|\\\\/g, '').trim() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "0d5e0331-9c8a-4c83-b2bc-cb6b5a946dbc",
      "name": "Limpiamos Imagen",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -320,
        620
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5d04d69d-cb9c-41be-a44a-95fac3c059f3",
              "name": "fecha",
              "value": "={{ $json.Limpio.match(/\"fecha\":\\s*\"([^\"]+)\"/)?.[1] || '' }}",
              "type": "string"
            },
            {
              "id": "791d6622-0b9c-4ff9-abd7-63c54c4c4f5f",
              "name": "monto",
              "value": "={{ $json.Limpio.match(/\"monto\":\\s*\"([^\"]+)\"/).at(1) || '0' }}",
              "type": "string"
            },
            {
              "id": "f2db0e16-0432-4de3-95bf-3e98a298b939",
              "name": "categoria",
              "value": "={{ $json.Limpio.match(/\"categoria\":\\s*\"([^\"]+)\"/)?.[1] || '' }}",
              "type": "string"
            },
            {
              "id": "217c0a67-02b4-4bea-823d-a4ef5bc585d2",
              "name": "descripcion",
              "value": "={{ $json.Limpio.match(/\"descripcion\":\\s*\"([^\"]+)\"/)?.[1] || '' }}",
              "type": "string"
            },
            {
              "id": "1ffa6e8b-6941-49aa-b39e-6f54382b71ff",
              "name": "metodo_pago",
              "value": "={{ $json.Limpio.match(/\"metodo_pago\":\\s*\"([^\"]+)\"/)?.[1] || '' }}",
              "type": "string"
            },
            {
              "id": "dd3ab75e-5ccc-45d3-a28f-1e02321e8bcf",
              "name": "razon_social",
              "value": "={{ $json.Limpio.match(/\"razon_social\":\\s*\"([^\"]+)\"/)?.[1] || '' }}",
              "type": "string"
            },
            {
              "id": "448bcd3f-595a-43a9-a0a7-0e3b13767793",
              "name": "var",
              "value": "={{ $json.Limpio }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "ad0cad9f-c617-487e-9998-28ced11d881b",
      "name": "Variables individuales",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -180,
        620
      ]
    },
    {
      "parameters": {
        "jsCode": "const data = $item(0).$node[\"Compara Get Memory\"].json[\"Redis2\"]; \n\nlet array = Array.isArray(data) ? data : JSON.parse(data);\n\nconst mensage_completo = array.join(\" \");\n\nreturn [{ json: { mensage_completo } }];\n"
      },
      "id": "f0a314f0-c4bc-4c9e-ad9f-797c5a563b5d",
      "name": "Compara memorias",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        40,
        640
      ]
    },
    {
      "parameters": {
        "operation": "push",
        "list": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}",
        "messageData": "={{ $json.content.mensaje }}{{ $json.var }}",
        "tail": true
      },
      "id": "04a55b27-9024-43ed-8a74-aad85fbc2a7f",
      "name": "Text Memory",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -600,
        1100
      ],
      "alwaysOutputData": false,
      "executeOnce": false,
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $node['Webhook1'].json.body.server_url }}/chat/sendPresence/{{ $node['Webhook1'].json.body.instance }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "apikey",
              "value": "={{ $node['Webhook1'].json.body.apikey }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"number\": \"{{ $node['Webhook1'].json.body.data.key.remoteJid }}\",\n    \"delay\": 3000,\n    \"presence\": \"composing\"\n}",
        "options": {}
      },
      "id": "48b68766-d7e7-40a8-874d-275987eaccbe",
      "name": "Escribiendo...",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -320,
        1100
      ],
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Transcribe audio a texto",
        "height": 253,
        "width": 1229
      },
      "id": "bc080e41-49d1-4a26-a221-650edbdafcc7",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -840,
        1340
      ]
    },
    {
      "parameters": {
        "content": "## Obtiene los datos de las imagenes",
        "height": 442.04353939667726,
        "width": 1220.142001404333,
        "color": 3
      },
      "id": "9dba2349-10fd-4e11-8253-6344478011c3",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -840,
        540
      ]
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "id": "7814b7b6-0327-4d4a-b101-b7286af3bc12",
      "name": "OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.7,
      "position": [
        -380,
        1420
      ],
      "credentials": {
        "openAiApi": {
          "id": "UfA35dBDzEebw8zR",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "key": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}"
      },
      "id": "d52ed665-7f0e-4ab6-9ec0-97aef668a965",
      "name": "Delete",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        200,
        640
      ],
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b7d210f0-6a18-456d-9e89-aa28f548b2a0",
              "name": "body.data.message.base64",
              "value": "={{ $('Webhook1').item.json.body.data.message.base64 }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "30b6c14d-131e-4bb6-a13e-509414fc6bbc",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -740,
        620
      ]
    },
    {
      "parameters": {
        "content": "## Memoria",
        "height": 266.50099845480025,
        "width": 1233.5096557871489,
        "color": 4
      },
      "id": "0b4c5f61-824f-4418-b123-b04d3f107b8e",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -840,
        1020
      ]
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "body.data.message.base64",
        "options": {}
      },
      "id": "741553c7-533c-4bb9-b41a-26bbf4faf535",
      "name": "imagen1",
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        -600,
        620
      ]
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "chatgpt-4o-latest",
          "mode": "list",
          "cachedResultName": "CHATGPT-4O-LATEST"
        },
        "text": "=Analiza esta imagen y crea una etiqueta con las categorias que creas correspondiente para determinar que producto es",
        "inputType": "base64",
        "options": {
          "detail": "high"
        }
      },
      "id": "d7b2845f-152b-4eb6-a305-5b5835d3db86",
      "name": "OpenAI2",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.7,
      "position": [
        -460,
        620
      ],
      "credentials": {
        "openAiApi": {
          "id": "UfA35dBDzEebw8zR",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "testagent",
        "options": {}
      },
      "id": "ad0ae5ed-acdc-4c66-ad02-43cd2417cf93",
      "name": "Webhook1",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -3760,
        1160
      ],
      "webhookId": "3ba6ce2e-1b02-4b06-8edd-9c60afb2db89"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1_ViCZNZhszxqWJqaNE7Pv9ryiVjFF6_NM2p4kNW2EPk/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Clientes",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1_ViCZNZhszxqWJqaNE7Pv9ryiVjFF6_NM2p4kNW2EPk/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idMensaje": "={{ $('Webhook1').item.json.body.data.key.id }}",
            "telefono": "={{ $('Webhook1').item.json.body.data.key.remoteJid }}",
            "Pushname": "={{ $('Webhook1').item.json.body.data.pushName }}"
          },
          "matchingColumns": [
            "Telefono"
          ],
          "schema": [
            {
              "id": "Pushname",
              "displayName": "Pushname",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Nombre_real",
              "displayName": "Nombre_real",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "telefono",
              "displayName": "telefono",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "idMensaje",
              "displayName": "idMensaje",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -2320,
        1300
      ],
      "id": "24ae58d2-1900-49fd-832f-62e9e9f58a2d",
      "name": "insertCliente",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "lRj57XPEqOXW9kOd",
          "name": "Qeva Solutions Sheet"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1_ViCZNZhszxqWJqaNE7Pv9ryiVjFF6_NM2p4kNW2EPk",
          "mode": "list",
          "cachedResultName": "Clientes",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1_ViCZNZhszxqWJqaNE7Pv9ryiVjFF6_NM2p4kNW2EPk/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Clientes",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1_ViCZNZhszxqWJqaNE7Pv9ryiVjFF6_NM2p4kNW2EPk/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Pushname",
              "lookupValue": "={{ $('Webhook1').item.json.body.data.pushName}}"
            },
            {
              "lookupColumn": "telefono",
              "lookupValue": "={{ $('Webhook1').item.json.body.data.key.remoteJid}}"
            },
            {
              "lookupColumn": "idMensaje",
              "lookupValue": "={{ $('Webhook1').item.json.body.data.key.id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -2960,
        1140
      ],
      "id": "0ad0d4e0-fddd-4715-b432-a08f6b8ab780",
      "name": "getCliente",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "lRj57XPEqOXW9kOd",
          "name": "Qeva Solutions Sheet"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "id": "47135d4b-936a-47f1-aba7-7e72be38393d",
      "name": "Unificados",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        -1480,
        1120
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "60065893-74f7-4b64-bc1a-d891202efa78",
                    "leftValue": "={{ $('Webhook1').item.json.body.data.messageType }}",
                    "rightValue": "imageMessage",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Imagen"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0cb14635-2673-408e-86db-ce9e0373674b",
                    "leftValue": "={{ $('Webhook1').item.json.body.data.messageType }}",
                    "rightValue": "conversation",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Texto"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Webhook1').item.json.body.data.messageType }}",
                    "rightValue": "audioMessage",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Áudio"
            }
          ]
        },
        "options": {}
      },
      "id": "ef2841a9-de2d-48fa-a4c3-53180110749d",
      "name": "Switch2",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -1280,
        1120
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f9ecf2fc-da2c-4f44-897a-5dc0a2f2f379",
              "name": "meta.telefonoCliente",
              "value": "={{ \n  $json.body?.conversation?.contact_inbox?.contact_id || \n  $json.body?.data?.key?.remoteJid || $('Webhook1').item.json.body?.data?.key?.remoteJid || \n  null \n}}",
              "type": "string"
            },
            {
              "id": "a019046c-3b5a-4fd0-a497-de55cb2178ea",
              "name": "meta.telefonoEmpresa",
              "value": "={{ $('Webhook1').item.json.body.sender }}",
              "type": "string"
            },
            {
              "id": "dab7ca54-c3d2-4a36-a9ca-a0ebbd375ef5",
              "name": "meta.nombreCliente",
              "value": "={{ $('Webhook1').item.json.body.data.pushName }}",
              "type": "string"
            },
            {
              "id": "01238a36-6907-4aec-ab21-26345ed5fc96",
              "name": "whatsapp.evo.nombreInstancia",
              "value": "={{ $('Webhook1').item.json.body.instance }}",
              "type": "string"
            },
            {
              "id": "81612acf-1b66-4c8e-82e4-ce8c77b31334",
              "name": "content.mensaje",
              "value": "={{ \n  $('Webhook1').item.json?.body?.content?.mensaje?.extendedTextMessage?.text ||\n     $('Webhook1').item.json?.body?.data?.message?.extendedTextMessage?.text ||\n  $('Webhook1').item.json?.body?.data?.message?.imageMessage?.caption || \n  $('Webhook1').item.json?.body?.data?.message?.conversation || \n  $('Webhook1').item.json?.message?.text || \n  $('Webhook1').item.json?.message?.caption || \n  null \n}}\n\n\n",
              "type": "string"
            },
            {
              "id": "cc7dcfe1-8ad7-4fe8-93ec-8f643c7d08c7",
              "name": "content.tipoMensaje",
              "value": "={{ $('Webhook1').item.json.body.data.messageType }}",
              "type": "string"
            },
            {
              "id": "2dfc64f4-b222-4ea7-b095-fdd96d9fcb95",
              "name": "content.idMensaje",
              "value": "={{ $('Webhook1').item.json.body.data.key.id }}",
              "type": "string"
            },
            {
              "id": "9d947263-3b68-4c63-88ba-ef1b9de22571",
              "name": "empresa.nombreEmpresa",
              "value": "iPhone's Candiani",
              "type": "string"
            },
            {
              "id": "076ad2d4-b8ea-440f-9c02-f7e8417a984d",
              "name": "whatsapp.evo.apikey",
              "value": "={{ $('Webhook1').item.json.body.apikey }}",
              "type": "string"
            },
            {
              "id": "0c237725-0428-4f1d-bddf-41bd289b3168",
              "name": "whatsapp.evo.server_url",
              "value": "={{ $('Webhook1').item.json.body.server_url}}",
              "type": "string"
            },
            {
              "id": "255b9c45-7769-4d09-9c50-61dcdfb7c09d",
              "name": "app.debouncerTime",
              "value": "6",
              "type": "string"
            },
            {
              "id": "196aeb96-5c33-4dd7-9a4f-6bd40765b7fb",
              "name": "doc.id",
              "value": "1G3ca5La7WxEfZxpRYwyxhweknGlxRFxWPiwoUoP7eUY",
              "type": "string"
            },
            {
              "id": "fc7c5c8f-b505-4a43-ae07-51eea58d6f80",
              "name": "linkPreview",
              "value": false,
              "type": "boolean"
            },
            {
              "id": "e30bbf8c-d5da-4410-b875-8dfe4b301798",
              "name": "Digitando",
              "value": 1200,
              "type": "number"
            },
            {
              "id": "f84d6fe6-e2b0-408b-b34c-5de04cac5f46",
              "name": "nombre_real",
              "value": "={{ $('getCliente').item.json.Nombre_real }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "cc4fea0e-aba8-4e55-95ad-7ae8434deb9e",
      "name": "camposiniciales",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1960,
        1140
      ],
      "notesInFlow": true
    },
    {
      "parameters": {
        "content": "#### Registrar usuario en *Supabase*",
        "height": 80,
        "width": 282,
        "color": 4
      },
      "id": "82c1701a-cada-4a7c-97e1-4dcb72e10bad",
      "name": "Sticky Note16",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2960,
        1360
      ]
    },
    {
      "parameters": {
        "content": "",
        "height": 752,
        "width": 920,
        "color": 5
      },
      "id": "0e0c048a-6414-423e-b931-d77c1f54bf82",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -3020,
        820
      ]
    },
    {
      "parameters": {
        "content": "Configure sus datos ",
        "height": 223.25452635785376,
        "width": 180.90155202154455,
        "color": 2
      },
      "id": "a4c9d5c3-0f66-4995-a14e-b6128c34f7ab",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2000,
        1080
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "b3c9b986-29a6-4418-a033-6422c387377f",
              "leftValue": "={{ $('Webhook1').item.json.body.data.key.fromMe }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "5c5fc36f-ee87-4d93-898a-deab2b897576",
      "name": "fromMe",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2480,
        1060
      ]
    },
    {
      "parameters": {},
      "id": "4ea1fe36-89c0-472a-8d0b-2958ec0a9de1",
      "name": "NOP1",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        -2260,
        880
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4e77cc7c-48f4-4cbe-94e7-6d211db67002",
              "leftValue": "={{ $json.telefono }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "e10beea5-960f-455e-925a-20f7d29077e7",
      "name": "If1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2700,
        1140
      ],
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "aa4d5d29-e6f1-4bce-b5ff-4575b553a077",
              "name": "systemMessageAgente",
              "value": "={\n  \"agent_description\": \"Sos un vendedor experto en repuestos de gas con más de 20 años de experiencia en el rubro. Atendés a clientes de manera cercana, con la típica calidez argentina, asesorándolos sobre estufas, calefactores, cocinas, hornos y sus repuestos, como válvulas de seguridad y termocuplas. Recibís consultas por texto, imágenes y audios, identificando productos y verificando stock en la base de datos. Pero más allá de vender, te gusta charlar con la gente, ayudarla y hacerles sentir que están en un lugar de confianza. Si un cliente quiere hablar de otra cosa, lo seguís con onda, siempre que sea dentro de los temas permitidos.\",\n  \"allowed_topics\": [\n    \"repuestos de gas\",\n    \"asesoramiento en calefactores\",\n    \"asesoramiento en cocinas y hornos\",\n    \"válvulas de seguridad\",\n    \"termocuplas\",\n    \"compatibilidad de repuestos\",\n    \"charlas amenas sobre experiencias con artefactos a gas\"\n  ],\n  \"restricted_topics\": [\n    \"temas políticos\",\n    \"religión\",\n    \"tecnología no relacionada con gas\",\n    \"productos que no sean repuestos de gas\"\n  ],\n  \"tools\": [\n    {\n      \"name\": \"Database\",\n      \"actions\": [\n        {\n          \"name\": \"fetch_product_info\",\n          \"description\": \"Obtiene información de un repuesto en la base de datos.\",\n          \"parameters\": {\n            \"product_name\": \"Texto o etiquetas detectadas\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"Google Vision API\",\n      \"actions\": [\n        {\n          \"name\": \"analyze_image\",\n          \"description\": \"Analiza una imagen enviada por el cliente y extrae etiquetas para identificar el producto.\",\n          \"parameters\": {\n            \"image_url\": \"URL de la imagen enviada\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"Speech-to-Text\",\n      \"actions\": [\n        {\n          \"name\": \"transcribe_audio\",\n          \"description\": \"Convierte un audio de voz enviado por el cliente en texto para su análisis.\",\n          \"parameters\": {\n            \"audio_url\": \"URL del audio enviado\"\n          }\n        }\n      ]\n    }\n  ],\n  \"default_response\": {\n    \"on_restricted_topic\": \"Mirá, no me meto en esos temas, pero si querés, te puedo dar una mano con cualquier consulta sobre gas y repuestos 😉.\",\n    \"on_unknown_product\": \"Uh, mirá, no encontré exactamente lo que buscás. ¿Tenés más detalles o querés que te tire algunas opciones similares?\"\n  },\n  \"conversation_rules\": {\n    \"strict_topics\": false,\n    \"validate_responses\": true,\n    \"response_handling\": {\n      \"valid_topic\": \"Buscar el producto en la base de datos o analizar la imagen/audio enviado.\",\n      \"invalid_topic\": \"Responder con el mensaje predeterminado y redirigir al cliente a los temas permitidos.\"\n    }\n  },\n  \"steps\": [\n    {\n      \"step\": 1,\n      \"instruction\": \"Recibir la consulta del cliente en formato de texto, imagen o audio.\",\n      \"validation\": {\n        \"condition\": \"detect_input_type(user_input) in ['text', 'image', 'audio']\",\n        \"error_message\": \"Mirá, no reconozco el formato del mensaje. Probá mandarme un texto, una foto o un audio y lo reviso.\"\n      },\n      \"response_handling\": {\n        \"on_text\": \"Buscar el producto en la base de datos según palabras clave.\",\n        \"on_image\": \"Analizar la imagen con Google Vision API y buscar coincidencias.\",\n        \"on_audio\": \"Convertir el audio en texto, analizarlo y buscar coincidencias en la base de datos.\"\n      }\n    },\n    {\n      \"step\": 2,\n      \"instruction\": \"Si el producto está en la base de datos, mostrar información de stock, precio y compatibilidad.\",\n      \"response_handling\": {\n        \"on_match\": \"Responder con el nombre del producto, descripción, precio y stock disponible.\",\n        \"on_no_match\": \"Preguntar al cliente si desea ver productos similares o más información.\"\n      }\n    },\n    {\n      \"step\": 3,\n      \"instruction\": \"Cerrar la venta ofreciendo opciones de pago y entrega.\",\n      \"response_handling\": {\n        \"on_confirmation\": \"Genial, te paso el link de pago y te explico cómo lo enviamos. ¡Gracias por confiar en nosotros! 🚀\",\n        \"on_doubt\": \"Si tenés alguna duda, preguntame sin drama. Prefiero que te lleves lo que realmente necesitás.\"\n      }\n    }\n  ],\n  \"error_handling\": {\n    \"on_failure\": {\n      \"action\": \"Después de 3 intentos fallidos, despedirse de forma cordial y sugerir contactar por otro medio.\",\n      \"log_errors\": true,\n      \"log_file\": \"/logs/conversation_errors.log\"\n    }\n  },\n  \"success_criteria\": {\n    \"conversation_complete\": true,\n    \"validation_checks_passed\": true\n  }\n}\n",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "id": "d2727205-0a4d-4502-a215-c4b327a70fa0",
      "name": "Prompts",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1760,
        1040
      ],
      "alwaysOutputData": false
    },
    {
      "parameters": {},
      "id": "fe35b071-b8cd-4b60-89f2-2ef81766e9dc",
      "name": "NoOp.4",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        -1760,
        1240
      ]
    },
    {
      "parameters": {
        "content": "",
        "height": 752,
        "width": 880,
        "color": 5
      },
      "id": "106dfba9-5c20-4443-9032-d52a16e7c0d2",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -3920,
        820
      ]
    },
    {
      "parameters": {
        "content": "#### Credenciales y datos predeterminados",
        "height": 80,
        "width": 282,
        "color": 4
      },
      "id": "29d46e50-a241-445b-b6d6-a35019f28378",
      "name": "Sticky Note18",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -3800,
        860
      ]
    },
    {
      "parameters": {
        "content": "Configure su prompt",
        "height": 223.25452635785376,
        "width": 180.90155202154455,
        "color": 2
      },
      "id": "da6064ee-cc39-4f89-be64-c6e9886852b3",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1800,
        980
      ]
    },
    {
      "parameters": {
        "content": "",
        "height": 752,
        "width": 1200,
        "color": 5
      },
      "id": "2fb28507-d81b-43ed-95ad-949efffd54fd",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2080,
        820
      ]
    }
  ],
  "pinData": null,
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-06-28T04:13:28.361Z",
  "versionId": "cb4c9386-0668-4de5-8b04-60836038b01a"
}