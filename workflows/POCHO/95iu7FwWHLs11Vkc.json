{
  "active": false,
  "connections": {
    "Workflow Input Trigger": {
      "main": [
        [
          {
            "node": "vars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "vars": {
      "main": [
        [
          {
            "node": "Redis1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "NocoDB": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Productos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "NocoDB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis1": {
      "main": [
        [
          {
            "node": "Productos2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Productos2": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Productos1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Productos": {
      "main": [
        [
          {
            "node": "Productos1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-04-16T13:18:27.817Z",
  "id": "95iu7FwWHLs11Vkc",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "DESPENSA - Comidas",
  "nodes": [
    {
      "parameters": {
        "operation": "delete",
        "key": "comidas:5492254423359"
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -2040,
        500
      ],
      "id": "8f927e1b-0745-4719-9d32-bee0e035df19",
      "name": "Redis2",
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "descripcion"
            },
            {
              "name": "Telefono"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -3680,
        20
      ],
      "id": "cd606992-d34f-4299-bf73-ba69864f9fc1",
      "name": "Workflow Input Trigger"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6e46f8fb-879f-4d37-b5f9-cfdf1177e673",
              "name": "descripcion",
              "value": "={{ $json.descripcion }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3440,
        20
      ],
      "id": "a7ab1094-1f51-4deb-9621-7055bf87ebe1",
      "name": "vars"
    },
    {
      "parameters": {
        "authentication": "nocoDbApiToken",
        "operation": "getAll",
        "projectId": "pc1g3m0ih934pz9",
        "table": "mmc2qmh5d09oy85",
        "returnAll": true,
        "options": {
          "fields": []
        }
      },
      "type": "n8n-nodes-base.nocoDb",
      "typeVersion": 3,
      "position": [
        -2580,
        200
      ],
      "id": "09c03fdd-4d0c-4258-9f9a-095956f09428",
      "name": "NocoDB",
      "credentials": {
        "nocoDbApiToken": {
          "id": "CawnXo6TfhLoivTw",
          "name": "NocoDB Token account"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "comidas",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -2380,
        200
      ],
      "id": "6c9162b8-7f27-4211-9019-2df0465e977f",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "fd06524c-64b9-494c-b07c-866a083aed27",
              "leftValue": "={{ $json.comidas }}",
              "rightValue": "",
              "operator": {
                "type": "array",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2740,
        20
      ],
      "id": "179bf58d-c8f5-4eb1-86d7-d46dd36411d7",
      "name": "If1"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "=comidas",
        "key": "=comidas:{{ $('Workflow Input Trigger').item.json.Telefono }}",
        "options": {}
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -3220,
        20
      ],
      "id": "0abaf8d1-6821-450b-8a0a-f0c0770b23a1",
      "name": "Redis1",
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a36ae4f2-54a0-4d2d-b58e-1a8c013faf22",
              "name": "comidas",
              "value": "={{ $json.comidas }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2980,
        20
      ],
      "id": "0683364d-47fb-49ab-b868-2e648a530359",
      "name": "Productos2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        -1640,
        20
      ],
      "id": "55d0053f-cf0d-4ae2-a4ac-5482023b64ea",
      "name": "Merge"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5b1f7094-6f76-4c92-b112-059537c4d552",
              "name": "comidas",
              "value": "={{ $json.comidas }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1840,
        200
      ],
      "id": "8f6ae874-3742-43ab-a184-5c56b35dab71",
      "name": "Productos1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1931bd85-0ac1-497b-a706-9d5785b6fd21",
              "name": "comidas",
              "value": "={{ JSON.stringify($json.comidas) }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1140,
        20
      ],
      "id": "3f94b19e-66c8-45e5-bdbb-d837244410a0",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "=comidas:{{ $('Workflow Input Trigger').item.json.Telefono }}",
        "value": "={{ JSON.stringify($json.comidas) }}",
        "expire": true,
        "ttl": 10800
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -2120,
        200
      ],
      "id": "1771dacb-57c9-4363-afec-81f034185626",
      "name": "Productos",
      "credentials": {
        "redis": {
          "id": "JMklVOvkU7koL2UG",
          "name": "Redis"
        }
      }
    }
  ],
  "pinData": {
    "Workflow Input Trigger": [
      {
        "json": {
          "descripcion": "Vendes comida?",
          "Telefono": "5492254423359"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-01-19T21:20:51.336Z",
      "updatedAt": "2025-01-19T21:20:51.336Z",
      "id": "dgrS6et84MZNe4W0",
      "name": "POCHO"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-05-10T14:15:06.451Z",
  "versionId": "c75016cd-a784-4a38-9b85-dea78d0db379"
}