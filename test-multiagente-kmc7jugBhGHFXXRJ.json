{"createdAt":"2025-06-28T03:55:50.061Z","updatedAt":"2025-06-28T03:55:50.061Z","id":"kmc7jugBhGHFXXRJ","name":"TEST MULTIAGENTE","active":false,"isArchived":false,"nodes":[{"parameters":{"operation":"get","key":"1","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-20,-20],"id":"34250bd1-44e2-4d3d-9ab5-f56e0a5cfc7d","name":"Redis","credentials":{"redis":{"id":"JMklVOvkU7koL2UG","name":"Redis"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $('Redis').item.json.propertyName }}","rightValue":"dudas","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"DUDAS"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[860,-20],"id":"e6e78f6d-d112-4807-8737-7499dadd39c2","name":"Switch"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1f01eef9-1f82-4cae-8c22-3838489491be","leftValue":"={{ $json.propertyName }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[400,-20],"id":"80282b76-134b-4bb4-bd1b-86dca7000aa5","name":"If"},{"parameters":{"operation":"set","key":"1"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[280,200],"id":"9a51f2d8-2210-4fe6-9c9e-11d6b64f80b4","name":"Redis1","credentials":{"redis":{"id":"JMklVOvkU7koL2UG","name":"Redis"}}},{"parameters":{"promptType":"define","text":"={{ $('When chat message received').item.json.chatInput }}","options":{"systemMessage":"SI EL USUARIO TIENE DUDAS O PREGUNTAS USA LA TOOL AGENTE DUDAS "}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[1500,-720],"id":"739e5233-58bf-47e8-ac98-3910cf178bea","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1480,-540],"id":"59e0bc44-3567-46fc-8fe3-4d534fd148af","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"UfA35dBDzEebw8zR","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"1"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[1600,-540],"id":"ace1092b-2808-4939-9ff9-2d304c5b2803","name":"Window Buffer Memory"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-360,-20],"id":"0ff3de04-51dd-4b6b-8623-6d38120786ef","name":"When chat message received","webhookId":"051649e4-71bd-4ec1-bdfc-60cd58e27902"},{"parameters":{"operation":"set","key":"1","value":"dudas"},"type":"n8n-nodes-base.redisTool","typeVersion":1,"position":[1800,-480],"id":"77dbd12e-0034-4d18-87ba-27054ff84e6e","name":"agente dudas","credentials":{"redis":{"id":"JMklVOvkU7koL2UG","name":"Redis"}}},{"parameters":{"operation":"get","key":"1","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[1880,-740],"id":"4e6b1855-bfed-493d-82cb-464a0db8c5dd","name":"Redis2","credentials":{"redis":{"id":"JMklVOvkU7koL2UG","name":"Redis"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1f01eef9-1f82-4cae-8c22-3838489491be","leftValue":"={{ $json.propertyName }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2100,-740],"id":"8cf66f4c-3a4b-419d-957f-18cffc30529a","name":"If1"},{"parameters":{"promptType":"define","text":"={{ $('When chat message received').item.json.chatInput }}","options":{"systemMessage":"ERES EXPERTO EN RESPONDER PREGUNTAS O DUDAS DEL USUARIO, SI EL USUARIO EXPRESA SU DESEO DE SABER LA HORA USA LA TOOL AGENTE HORA"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[1640,820],"id":"e1312158-eb4e-4363-88cd-ae13bab84bdb","name":"AI Agent1"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[1620,1000],"id":"89fcbad2-c5c9-4317-9c7e-456d3032dd32","name":"OpenAI Chat Model1","credentials":{"openAiApi":{"id":"UfA35dBDzEebw8zR","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"2"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[1740,1000],"id":"5029ff37-33ec-499d-805b-68b32de7f452","name":"Window Buffer Memory1"},{"parameters":{"operation":"get","key":"1","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[2020,800],"id":"6dea5e64-0912-4664-b07c-20c16b6087c3","name":"Redis3","credentials":{"redis":{"id":"JMklVOvkU7koL2UG","name":"Redis"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1f01eef9-1f82-4cae-8c22-3838489491be","leftValue":"={{ $json.propertyName }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2260,800],"id":"92113066-1069-4872-857f-817d23b43819","name":"If2"},{"parameters":{"descriptionType":"manual","operation":"set","key":"1"},"type":"n8n-nodes-base.redisTool","typeVersion":1,"position":[1920,1000],"id":"cf40f54d-d52b-4c78-8bd3-15e639f90783","name":"agente hora","credentials":{"redis":{"id":"JMklVOvkU7koL2UG","name":"Redis"}}},{"parameters":{"assignments":{"assignments":[{"id":"571c2896-eb9b-4ba2-8e5b-49fc8ef12296","name":"RESPUESTA","value":"={{ $('AI Agent').item.json.output }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2360,-720],"id":"a64af092-27f4-42e7-a18f-517ad41e7c66","name":"Edit Fields"}],"connections":{"Switch":{"main":[[{"node":"AI Agent1","type":"main","index":0}]]},"Redis":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"AI Agent","type":"main","index":0}],[{"node":"Switch","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Window Buffer Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"When chat message received":{"main":[[{"node":"Redis","type":"main","index":0}]]},"agente dudas":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Redis2":{"main":[[{"node":"If1","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Redis2","type":"main","index":0}]]},"If1":{"main":[[{"node":"Edit Fields","type":"main","index":0}],[{"node":"Redis","type":"main","index":0}]]},"AI Agent1":{"main":[[{"node":"Redis3","type":"main","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0}]]},"Window Buffer Memory1":{"ai_memory":[[{"node":"AI Agent1","type":"ai_memory","index":0}]]},"Redis3":{"main":[[{"node":"If2","type":"main","index":0}]]},"agente hora":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"If2":{"main":[[{"node":"Redis","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"0eeaa736-a75a-45d0-abfa-dfb5cef89519","triggerCount":0,"tags":[]}