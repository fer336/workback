{"createdAt":"2025-02-11T21:30:20.355Z","updatedAt":"2025-05-11T22:37:36.426Z","id":"5Tfs5THJd4xrlK27","name":"BACKUP GITHUB PROJECT AND DEBUGGER","active":true,"nodes":[{"parameters":{"options":{}},"id":"c404dc4b-4823-4532-8d4e-6e8a1d6ba376","name":"Set date","type":"n8n-nodes-base.dateTime","typeVersion":2,"position":[500,40]},{"parameters":{"operation":"formatDate","date":"={{ $json.currentDate }}","format":"custom","customFormat":"dd-MM-yyyy/H:mm","options":{}},"id":"209bd9a9-8476-4903-8988-27bf17d32b02","name":"Format date","type":"n8n-nodes-base.dateTime","typeVersion":2,"position":[700,40]},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"commitDate","value":"={{ $json.formattedDate }}"}]},"options":{}},"id":"5f175711-be22-44af-819e-3479f78d182f","name":"Set commit date","type":"n8n-nodes-base.set","typeVersion":2,"position":[900,40]},{"parameters":{"authentication":"oAuth2","resource":"file","operation":"list","owner":{"__rl":true,"value":"https://github.com/fer336","mode":"url"},"repository":{"__rl":true,"value":"workback","mode":"name"},"filePath":"="},"id":"2ecbed01-d751-4b79-b0be-943dfbb043e1","name":"List files from repository [GITHUB]","type":"n8n-nodes-base.github","typeVersion":1,"position":[1140,-320],"alwaysOutputData":true,"webhookId":"b83274a6-e66c-4eb0-8017-61bfb4e43873","credentials":{"githubOAuth2Api":{"id":"jT5LNDbXbJWMToOl","name":"Qeva Github"}}},{"parameters":{"operation":"aggregateItems","fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"name"}]},"options":{}},"id":"cc68874e-17dc-4317-9381-f213d14be697","name":"Combine file names [GITHUB]","type":"n8n-nodes-base.itemLists","typeVersion":2.1,"position":[1300,40]},{"parameters":{"filters":{},"requestOptions":{}},"id":"d47ff891-86bb-494c-a51b-abdebd27d1ab","name":"Retrieve workflows [N8N]","type":"n8n-nodes-base.n8n","typeVersion":1,"position":[1500,40],"credentials":{"n8nApi":{"id":"Ki5wPNytwpKrHGnQ","name":"WorkFlows"}}},{"parameters":{"mode":"jsonToBinary","options":{"fileName":"={{ $json.name.replace(/\\s+/g, '-').toLowerCase() }}-{{ $json.id }}.json"}},"id":"4e80dd39-bd6e-471c-9151-3cd3852492f7","name":"Move JSON to binary","type":"n8n-nodes-base.moveBinaryData","typeVersion":1,"position":[1700,40]},{"parameters":{"batchSize":1,"options":{}},"id":"16cc3c6a-76ba-49bd-80bd-fd6abf494b9d","name":"Split to single items","type":"n8n-nodes-base.splitInBatches","typeVersion":2,"position":[1940,40]},{"parameters":{"conditions":{"string":[{"value1":"={{ $node['Combine file names [GITHUB]'].json.name }}","operation":"contains","value2":"={{ $binary.data.fileName }}"}]}},"id":"368a2b47-6c8e-4934-a971-efb8a3d19d0a","name":"Check if file exists in repository","type":"n8n-nodes-base.if","typeVersion":1,"position":[2180,-40]},{"parameters":{"authentication":"oAuth2","resource":"file","operation":"edit","owner":{"__rl":true,"value":"https://github.com/ferc33/agentAI","mode":"url"},"repository":{"__rl":true,"value":"agentAI","mode":"list","cachedResultName":"agentAI","cachedResultUrl":"https://github.com/ferc33/agentAI"},"filePath":"={{ $binary.data.fileName }}","binaryData":true,"commitMessage":"=backup-{{ $node['Set commit date'].json.commitDate }}"},"id":"853710b4-c189-40a3-8db3-fe23eb397c14","name":"Update file [GITHUB]","type":"n8n-nodes-base.github","typeVersion":1,"position":[2400,-240],"webhookId":"f6c1b7c5-5ba0-43a2-8ece-e0500304d7a4","credentials":{"githubOAuth2Api":{"id":"QztSTmcOzsjzpbXg","name":"GitHub account"}}},{"parameters":{"authentication":"oAuth2","resource":"file","owner":{"__rl":true,"value":"https://github.com/fer336/workback","mode":"url"},"repository":{"__rl":true,"value":"workback","mode":"list","cachedResultName":"workback","cachedResultUrl":"https://github.com/fer336/workback"},"filePath":"={{ $binary.data.fileName }}","binaryData":true,"commitMessage":"=backup-{{ $node['Set commit date'].json.commitDate }}"},"id":"27e5d0a5-0540-49c8-b8de-205b523a653b","name":"Upload file [GITHUB]","type":"n8n-nodes-base.github","typeVersion":1,"position":[2400,160],"webhookId":"a3232791-ada7-455b-bd8f-86573ee3f050","credentials":{"githubOAuth2Api":{"id":"jT5LNDbXbJWMToOl","name":"Qeva Github"}}},{"parameters":{"content":"## Upload backup\nSplit JSON files into batches of 1, check if they were uploaded to repository before. If yes (true), upload the new version of the file. Otherwise (false) create the file in repository.","height":731.633426614796,"width":703.8733020263451},"id":"762aa514-43d5-4822-a725-955a77f7665f","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1880,-380]},{"parameters":{"content":"## Retrieve workflows\nGet all workflows form your n8n instance. Remember that **your credentials need to point to the instance that you want to backup.**","height":339.42690909090965,"width":384.14708363636373},"id":"94a4274d-3201-4819-863e-f226b340f3ac","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1480,-120]},{"parameters":{"content":"## Make a list of existing files\nReturn a list of existing files (backups) in GitHub repository. Data returned by those nodes is used by \"IF\" node (later in workflow) to check whether the backup files should be created or updated.","height":339.42690909090965,"width":389.89265454545443},"id":"6ba228d5-b265-4338-911a-6205db70d12e","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1060,-120]},{"parameters":{"content":"## Set and format date/time\nThose nodes are responsible for setting a current date and time in format `dd-MM-yyyy/H:mm`. Date and time are used to compose commit messages in GitHub, for example: `backup-12-07-2023/14:18`.","height":339.42690909090965,"width":585.4045090909088},"id":"75047147-050c-4dd1-87fd-8ba62065271d","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[460,-120]},{"parameters":{"content":"## Trigger\nYou can change it to [\"Schedule\" trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/) to make backups on regular basis.","height":339.51767272727324,"width":182.4715262478496},"id":"041f5665-78a9-411a-9573-fec6bc172427","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[260,-120]},{"parameters":{"rule":{"interval":[{"triggerAtHour":3,"triggerAtMinute":33}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[280,40],"id":"5204fff8-721e-485b-a08d-22b8af410c30","name":"Schedule Trigger"},{"parameters":{"chatId":"164729397","text":"=Workflows actualizados correctamente en github","additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[2160,160],"id":"1b0e7435-a8c7-421f-ae71-2ab787f5f7f3","name":"Telegram1","webhookId":"e4b6548e-8950-419c-b3b2-c56e46830553","credentials":{"telegramApi":{"id":"Uk3tgb6s53LxEXnG","name":"Debuger"}}},{"parameters":{"authentication":"oAuth2","resource":"file","operation":"list","owner":{"__rl":true,"value":"https://github.com/fer336","mode":"url"},"repository":{"__rl":true,"value":"workback","mode":"name"},"filePath":"="},"id":"2efd5f7b-70a6-440c-ac40-e81543a6b6e6","name":"List files from repository [GITHUB]1","type":"n8n-nodes-base.github","typeVersion":1,"position":[1120,40],"alwaysOutputData":true,"webhookId":"b83274a6-e66c-4eb0-8017-61bfb4e43873","credentials":{"githubOAuth2Api":{"id":"jT5LNDbXbJWMToOl","name":"Qeva Github"}}}],"connections":{"Set date":{"main":[[{"node":"Format date","type":"main","index":0}]]},"Format date":{"main":[[{"node":"Set commit date","type":"main","index":0}]]},"Set commit date":{"main":[[{"node":"List files from repository [GITHUB]1","type":"main","index":0}]]},"List files from repository [GITHUB]":{"main":[[]]},"Combine file names [GITHUB]":{"main":[[{"node":"Retrieve workflows [N8N]","type":"main","index":0}]]},"Retrieve workflows [N8N]":{"main":[[{"node":"Move JSON to binary","type":"main","index":0}]]},"Move JSON to binary":{"main":[[{"node":"Split to single items","type":"main","index":0}]]},"Split to single items":{"main":[[{"node":"Check if file exists in repository","type":"main","index":0}],[{"node":"Telegram1","type":"main","index":0}]]},"Check if file exists in repository":{"main":[[{"node":"Update file [GITHUB]","type":"main","index":0}],[{"node":"Upload file [GITHUB]","type":"main","index":0}]]},"Update file [GITHUB]":{"main":[[{"node":"Split to single items","type":"main","index":0}]]},"Upload file [GITHUB]":{"main":[[{"node":"Split to single items","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"Set date","type":"main","index":0}]]},"List files from repository [GITHUB]1":{"main":[[{"node":"Combine file names [GITHUB]","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","timezone":"America/Argentina/Buenos_Aires","errorWorkflow":"2kOn0Oz7c2uvczPK","callerPolicy":"workflowsFromSameOwner"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]},"node:Schedule Trigger1":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{"Schedule Trigger":[{"json":{"timestamp":"2025-05-11T03:33:38.010-03:00","Readable date":"May 11th 2025, 3:33:38 am","Readable time":"3:33:38 am","Day of week":"Sunday","Year":"2025","Month":"May","Day of month":"11","Hour":"03","Minute":"33","Second":"38","Timezone":"America/Argentina/Buenos_Aires (UTC-03:00)"}}]},"versionId":"b4c97842-c869-4ecc-b98d-a1976684b763","triggerCount":1,"tags":[]}